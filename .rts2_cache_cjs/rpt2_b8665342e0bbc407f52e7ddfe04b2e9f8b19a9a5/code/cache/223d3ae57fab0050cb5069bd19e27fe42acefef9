{"code":"import { fetch, push } from \"~Data/PushPull\";\r\nexport function _Cache(fn, fnArgs, cacheName, cacheTime = 1500) {\r\n    const objCacheMethodsBuilder = Object.create({\r\n        data: {},\r\n    });\r\n    const cache = CacheService.getUserCache();\r\n    objCacheMethodsBuilder.data.cache = cache;\r\n    const cached = objCacheMethodsBuilder.data.cache.get(cacheName);\r\n    objCacheMethodsBuilder.data.cached = cached;\r\n    let result;\r\n    let message;\r\n    let hits = fetch(\"state\", \"cache.hits\");\r\n    if (!!cached) {\r\n        result = cached;\r\n        message = \"Cache found\";\r\n        ++hits;\r\n        push([\"state\", \"cache.hits\"], hits);\r\n    }\r\n    else {\r\n        if (fnArgs != null) {\r\n            result = fn(...fnArgs);\r\n        }\r\n        else {\r\n            result = fn();\r\n        }\r\n        cache.put(cacheName, result, cacheTime);\r\n        message = \"Not found. Cached.\";\r\n    }\r\n    push([\"state\", `cache.${cacheName}`], message);\r\n    objCacheMethodsBuilder.data = {\r\n        // @ts-ignore\r\n        \"@context\": [\"cacheHandler\"],\r\n        cache,\r\n        cacheName,\r\n        cached,\r\n        message,\r\n        result,\r\n    };\r\n    objCacheMethodsBuilder.invalidate = () => {\r\n        if (cached != null) {\r\n            objCacheMethodsBuilder.data.cachedName = null;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    objCacheMethodsBuilder.getResult = () => {\r\n        return {\r\n            \"@context\": [\"cacheHandler\", {\r\n                    method: \"getResult\",\r\n                }],\r\n            \"cacheData\": objCacheMethodsBuilder.data.result,\r\n            \"cacheName\": objCacheMethodsBuilder.data.cachedName,\r\n            \"cacheStatus\": [true, objCacheMethodsBuilder.data.message],\r\n        };\r\n    };\r\n    return objCacheMethodsBuilder;\r\n}\r\n//# sourceMappingURL=Aux.js.map","map":"{\"version\":3,\"file\":\"Aux.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/Handlers/Aux.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,KAAK,EAAE,IAAI,EAAC,MAAM,gBAAgB,CAAA;AAE1C,MAAM,UAAU,MAAM,CAAC,EAAuB,EACvB,MAAY,EACZ,SAAiB,EACjB,SAAS,GAAG,IAAI;IACnC,MAAM,sBAAsB,GAAG,MAAM,CAAC,MAAM,CAAC;QAC3C,IAAI,EAAE,EAAE;KACT,CAAkB,CAAA;IAEnB,MAAM,KAAK,GAAG,YAAY,CAAC,YAAY,EAAE,CAAA;IACzC,sBAAsB,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;IACzC,MAAM,MAAM,GAAG,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,CAAA;IAC/D,sBAAsB,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;IAE3C,IAAI,MAAM,CAAA;IACV,IAAI,OAAO,CAAA;IACX,IAAI,IAAI,GAAG,KAAK,CAAC,OAAO,EAAE,YAAY,CAAC,CAAA;IAEvC,IAAI,CAAC,CAAC,MAAM,EAAE;QACV,MAAM,GAAG,MAAM,CAAA;QACf,OAAO,GAAG,aAAa,CAAA;QACvB,EAAE,IAAI,CAAA;QACN,IAAI,CAAC,CAAC,OAAO,EAAE,YAAY,CAAC,EAAE,IAAI,CAAC,CAAA;KACtC;SAAM;QACH,IAAI,MAAM,IAAI,IAAI,EAAE;YAChB,MAAM,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC,CAAA;SACzB;aAAM;YACH,MAAM,GAAG,EAAE,EAAE,CAAA;SAChB;QACD,KAAK,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,EAAE,SAAS,CAAC,CAAA;QACvC,OAAO,GAAG,oBAAoB,CAAA;KACjC;IAED,IAAI,CAAC,CAAC,OAAO,EAAE,SAAS,SAAS,EAAE,CAAC,EAAE,OAAO,CAAC,CAAA;IAE9C,sBAAsB,CAAC,IAAI,GAAG;QAC5B,aAAa;QACX,UAAU,EAAE,CAAE,cAAc,CAAE;QAC9B,KAAK;QACL,SAAS;QACT,MAAM;QACN,OAAO;QACP,MAAM;KACT,CAAA;IAED,sBAAsB,CAAC,UAAU,GAAG,GAAG,EAAE;QACrC,IAAI,MAAM,IAAI,IAAI,EAAE;YAChB,sBAAsB,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAA;YAC7C,OAAO,IAAI,CAAA;SACd;QACD,OAAO,KAAK,CAAA;IAChB,CAAC,CAAA;IAED,sBAAsB,CAAC,SAAS,GAAG,GAAG,EAAE;QACpC,OAAO;YACH,UAAU,EAAE,CAAE,cAAc,EAAE;oBAC1B,MAAM,EAAE,WAAW;iBACtB,CAAC;YACF,WAAW,EAAE,sBAAsB,CAAC,IAAI,CAAC,MAAM;YAC/C,WAAW,EAAE,sBAAsB,CAAC,IAAI,CAAC,UAAU;YACnD,aAAa,EAAE,CAAC,IAAI,EAAE,sBAAsB,CAAC,IAAI,CAAC,OAAO,CAAC;SAC7D,CAAA;IACL,CAAC,CAAA;IAED,OAAO,sBAAsB,CAAA;AACjC,CAAC\"}","dts":{"name":"/Users/ramos/Development/gmail-weather/Handlers/Aux.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"app\" />\r\nexport declare function _Cache(fn: (args?: any) => any, fnArgs: [\"\"], cacheName: string, cacheTime?: number): ICacheWrapper;\r\n"}}
