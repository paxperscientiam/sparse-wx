{"id":"AQ1B","dependencies":[{"name":"/Users/ramos/Development/gmail-weather/tsconfig.json","includedInParent":true,"mtime":1577992220082},{"name":"/Users/ramos/Development/gmail-weather/package.json","includedInParent":true,"mtime":1577926760432},{"name":"~Utilities/Validate","loc":{"line":3,"column":25},"parent":"/Users/ramos/Development/gmail-weather/src/Cards/User/Sections/User.ts","resolved":"/Users/ramos/Development/gmail-weather/src/Utilities/Validate.ts"},{"name":"~Cards/Main/Widgets/Reset","loc":{"line":4,"column":22},"parent":"/Users/ramos/Development/gmail-weather/src/Cards/User/Sections/User.ts","resolved":"/Users/ramos/Development/gmail-weather/src/Cards/Main/Widgets/Reset.ts"},{"name":"~Cards/Main","loc":{"line":5,"column":21},"parent":"/Users/ramos/Development/gmail-weather/src/Cards/User/Sections/User.ts","resolved":"/Users/ramos/Development/gmail-weather/src/Cards/Main.ts"},{"name":"~Cards/Aux","loc":{"line":6,"column":20},"parent":"/Users/ramos/Development/gmail-weather/src/Cards/User/Sections/User.ts","resolved":"/Users/ramos/Development/gmail-weather/src/Cards/Aux.ts"}],"generated":{"js":"var $AQ1B$exports={},$AQ1B$export$__esModule=!0;$AQ1B$exports.__esModule=$AQ1B$export$__esModule;var $AQ1B$var$Validate_1=$parcel$require(\"AQ1B\",\"~Utilities/Validate\"),$AQ1B$var$Reset_1=$parcel$require(\"AQ1B\",\"~Cards/Main/Widgets/Reset\"),$AQ1B$var$Main_1=$parcel$require(\"AQ1B\",\"~Cards/Main\"),$AQ1B$var$Aux_1=$parcel$require(\"AQ1B\",\"~Cards/Aux\");function $AQ1B$var$UserSection(){var e=!!fetch(\"state\",\"mint\"),t=fetch(\"user\",\"zip_code\"),r=CardService.newAction().setFunctionName(\"getAddressSuggestionsCallback\").setParameters({}),a=CardService.newAction().setFunctionName(\"processUserPreferencesFormCallback\").setParameters({}),s=\"Forecast Location\";t&&(s+=\" (\"+t+\")\");var i=$AQ1B$var$Aux_1._CardSection();return push([\"state\",\"menu.submitTemp.options.values\"],\"dropdown_item_f, dropdown_item_c\"),i.addWidget($AQ1B$var$Aux_1._TextInput({fieldName:\"user_name_key\",hint:\"How should SparseWx address you? (25 character max)\",title:\"Your Name (optional)\"})).addWidget($AQ1B$var$Aux_1._TextInput({fieldName:\"user_address_key\",hint:\"City, state or ZIP code\",title:s,suggestions:r})).addWidget($AQ1B$var$Aux_1._SelectionInput({fieldName:\"temperature_unit_list\",items:[{text:\"Fahrenheit\",value:\"dropdown_item_f\",selected:!0},{text:\"Celsius\",value:\"dropdown_item_c\",selected:!1}],title:\"Temperature Scale\",type:\"DROPDOWN\"})).addWidget($AQ1B$var$Aux_1._TextButton({action:a,text:\"Submit\"})),e||i.addWidget($AQ1B$var$Reset_1.ResetWidget()),i.setCollapsible(!1).build()}$parcel$global.submitNameCallback=function(e){Logger.log(e);var t=e.formInput.user_name_key;if(push([\"input\",\"user_name_key\"],t),!t)return!1;if($AQ1B$var$Validate_1.validateUserName(t)[0])return push([\"state\",\"input.name\"],\"valid\"),push([\"state\",\"mint\"],!1),push([\"user\",\"name\"],t),!0;throw push([\"state\",\"input.name\"],\"invalid\"),new Error(\"bad name\")},$parcel$global.submitAddressCallback=function(e){var t=dictionary.BRAND,r=e.formInput.user_address_key;push([\"input\",\"user_address_key\"],r);var a=fetch(\"user\",\"address\");if(!r&&!a)throw new Error(\"First time? You'll need to set an address\");if(!r)return!1;Logger.log(\"Submitted address is \"+r);var s=$AQ1B$var$Validate_1.validateMailingAddress(r);if(s[0])return push([\"state\",\"input.address\"],\"valid\"),push([\"state\",\"mint\"],!1),!0;if(\"ZERO_RESULTS\"===s[1])throw push([\"state\",\"input.address\"],\"ZERO_RESULTS\"),new Error(\"Sorry, that address wasn't found. Try something else.\");if(\"UNSUPPORTED_REGION\"===s[1])throw push([\"state\",\"input.address\"],\"UNSUPPORTED_REGION\"),new Error(\"Sorry, \"+t.NAME+\" only supports results for the USA.\");throw push([\"state\",\"input.address\"],\"ERR\"),new Error(\"Sorry, try a different address.\")},$parcel$global.submitTemperatureUnitCallback=function(e){var t=e.formInputs.temperature_unit_list[0];return e.temp_unit!==t&&(!(!t||\"\"===t)&&(push([\"user\",\"temp_unit\"],t),!0))},$parcel$global.getAddressSuggestionsCallback=function(){Logger.log(\"Address suggestions callback ... called\");var e=CardService.newSuggestions();user.suggested_address_one,user.suggested_address_two,user.suggested_address_three;return e.addSuggestion(\"one\").addSuggestion(\"two\").addSuggestion(\"three\"),CardService.newSuggestionsResponseBuilder().setSuggestions(e).build()},$parcel$global.processUserPreferencesFormCallback=function(e){Logger.log(\"processUserPreferencesFormCallback ... \");var t=!1,r=\"\";try{var a=submitNameCallback(e);t=t||a,a&&(r=\"Name set. \")}catch(n){return CardService.newActionResponseBuilder().setNotification(CardService.newNotification().setType(CardService.NotificationType.ERROR).setText(n.message)).setStateChanged(!1).build()}try{var s=submitAddressCallback(e);t=t||s,s&&(r+=\"Address set.\")}catch(n){return CardService.newActionResponseBuilder().setNotification(CardService.newNotification().setType(CardService.NotificationType.ERROR).setText(n.message)).setStateChanged(!1).build()}try{var i=submitTemperatureUnitCallback(e);t=t||i,i&&(r+=\" Unit changed.\")}catch(n){return CardService.newActionResponseBuilder().setNotification(CardService.newNotification().setType(CardService.NotificationType.ERROR).setText(n.message)).setStateChanged(!1).build()}return t?CardService.newActionResponseBuilder().setNavigation(CardService.newNavigation().pushCard($AQ1B$var$Main_1.MainCard().build())).setNotification(CardService.newNotification().setType(CardService.NotificationType.INFO).setText(r)).setStateChanged(!0).build():CardService.newActionResponseBuilder().setNotification(CardService.newNotification().setType(CardService.NotificationType.INFO).setText(\"Nothing changed\")).setStateChanged(!1).build()};var $AQ1B$export$UserSection=$AQ1B$var$UserSection;$AQ1B$exports.UserSection=$AQ1B$export$UserSection;"},"sourceMaps":null,"error":null,"hash":"ade83ea3ff856cd3c1243423e4eb18e8","cacheData":{"env":{},"imports":{"$require$~Utilities/Validate":["~Utilities/Validate","*"],"$require$~Cards/Main/Widgets/Reset":["~Cards/Main/Widgets/Reset","*"],"$require$~Cards/Main":["~Cards/Main","*"],"$require$~Cards/Aux":["~Cards/Aux","*"]},"exports":{"__esModule":"$AQ1B$export$__esModule","UserSection":"$AQ1B$export$UserSection"},"wildcards":[],"sideEffects":true,"isCommonJS":true}}