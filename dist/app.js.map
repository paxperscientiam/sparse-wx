{"version":3,"sources":["/src/index.ts","/src/Cards/MainCardController.ts","tslib/tslib.es6.js","/src/Cards/CardController.ts","/src/Models/MainCardModel.ts","/src/Data/PushPull.ts","object-path/index.js","dset/dist/dset.es.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,wDAAwD;AACxD,CAAC;IACC,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE;QACnC,OAAM;KACP;IACD,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,EAAE,WAAW,EAAE;QACnD,YAAY,EAAE,IAAI;QAClB,GAAG;YACD,OAAO,IAAI,CAAA;QACb,CAAC;KACF,CAAC,CAAA;IACF,aAAa;IACb,SAAS,CAAC,WAAW,GAAG,SAAS,CAAA;IACjC,aAAa;IACb,OAAO,MAAM,CAAC,SAAS,CAAC,SAAS,CAAA;AACnC,CAAC,CAAC,EAAE,CAAA;AAEJ,qCAAiE;AAIjE,gCAAwD;AAExD,IAAM,cAAc,GAAe,iBAAiB,CAAC,iBAAiB,EAAE,CAAA;AACxE,WAAW,CAAC,cAAc,GAAG,cAAc,CAAA;AAE3C,WAAW,CAAC,UAAU,GAAG;IACvB,IAAM,KAAK,GAAG,IAAI,6BAAa,EAAE,CAAA;IACjC,IAAM,QAAQ,GAAG,IAAI,uCAAkB,EAAE,CAAA;IAEzC,KAAK,CAAC,KAAK,GAAG,yBAAyB,CAAA;IACvC,KAAK,CAAC,IAAI,GAAG,WAAW,CAAA;IACxB,KAAK,CAAC,QAAQ,GAAG,mBAAmB,CAAA;IACpC,EAAE;IACF,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CAAA;IAC9B,EAAE;IACF,OAAO,QAAQ,CAAC,KAAK,EAAE,CAAA;AACzB,CAAC,CAAA;;;;;;;;ACvCD,iCAA6D;AAE7D;IAAwC,8CAAkB;IAExD;QAAA,YACE,iBAAO,SACR;QAHD,WAAK,GAAW,cAAc,CAAA;;IAG9B,CAAC;IACH,yBAAC;AAAD,CALA,AAKC,CALuC,mCAAkB,GAKzD;AALY,gDAAkB;AAO/B,mDAAmD;AAEnD,4CAA4C;AAC5C,iCAAiC;AAEjC,+BAA+B;AAE/B,8BAA8B;AAC9B,wBAAwB;AACxB,gDAAgD;AAChD,eAAe;AACf,mCAAmC;AACnC,QAAQ;AACR,SAAS;AAET,mBAAmB;AACnB,iBAAiB;AACjB,wBAAwB;AACxB,6CAA6C;AAC7C,uBAAuB;AACvB,MAAM;AAEN,+CAA+C;AAC/C,2BAA2B;AAC3B,OAAO;AACP,IAAI;;;;;AClCJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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xE,CAAC;AAfD,oBAeC;AAED,SAAgB,KAAK,CAAC,SAAiB,EAAE,QAAc;IACrD,aAAa;IACb,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,cAAc,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAA;IACvE,IAAI,GAAG,IAAI,IAAI,EAAE;QACf,GAAG,GAAG,EAAE,CAAA;QACR,WAAW,CAAC,cAAc,CAAC,WAAW,CAAC,SAAS,EAAE,IAAI,CAAC,CAAA;QACvD,OAAO,IAAI,CAAA;KACZ;IACD,IAAI,QAAQ,IAAI,IAAI,EAAE;QACpB,OAAO,GAAG,CAAA;KACX;IACD,OAAO,wBAAU,CAAC,kBAAkB,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAA;AACzD,CAAC;AAZD,sBAYC;;;;;ACpCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app","sourcesContent":["declare const Application: ISparseWx\n\n// globalThis polyfill thanks to some genius on the net!\n(() => {\n  if (typeof Application === \"object\") {\n    return\n  }\n  Object.defineProperty(Object.prototype, \"__magic__\", {\n    configurable: true,\n    get() {\n      return this\n    },\n  })\n  // @ts-ignore\n  __magic__.Application = __magic__\n  // @ts-ignore\n  delete Object.prototype.__magic__\n})()\n\nimport { MainCardController } from \"App/Cards/MainCardController\"\n\nimport { View } from \"App/ViewsController\"\n\nimport { MainCardModel } from \"App/Models/MainCardModel\"\n\nconst userProperties: Properties = PropertiesService.getUserProperties()\nApplication.userProperties = userProperties\n\nApplication.buildAddOn = (): any => {\n  const model = new MainCardModel()\n  const mainCard = new MainCardController()\n\n  model.title = \"Title of the main card!\"\n  model.name = \"Main card\"\n  model.subtitle = \"maincard subtitle\"\n  //\n  mainCard.bindingContext(model)\n  //\n  return mainCard.build()\n}\n","import { BaseCardController } from \"App/Cards/CardController\"\n\nexport class MainCardController extends BaseCardController  {\n  route: string = \"localityInfo\"\n  constructor() {\n    super()\n  }\n}\n\n// export const MainCard = new MainCardController()\n\n// export function MainCard(): CardBuilder {\n//   const date = new DateArray()\n\n//   const userName = \"Valerie\"\n\n//   const greeting = (() => {\n//     if (!!userName) {\n//       return `${date.GREETING}, ${userName}!`\n//     } else {\n//       return `${date.GREETING}!`\n//     }\n//   })()\n\n//   const data = {\n//     image: \"\",\n//     name: \"mainCard\",\n//     subtitle: `Today is ${date.WEEKDAY}.`,\n//     title: greeting,\n//   }\n\n//   return new CardFactory(data).addSections([\n//     DisclaimerSection(),\n//   ])\n// }\n",null,"import {render} from \"App/Handlers/Templates\"\nimport { View } from \"./Aux\"\nimport { CardSectionFactory, WidgetFactory, CardFactory } from \"App/Cards/Aux\"\n\ninterface IDamn {\n  route: string\n  source: any\n}\n\nexport class BaseCardController implements IDamn {\n  route!: string\n  view!: any\n  source!: any\n\n  card: any\n  cardHeader: any\n\n  constructor() {\n    this.card = CardService.newCardBuilder()\n    this.cardHeader = CardService.newCardHeader()\n  }\n\n  bindingContext(source: any) {\n    this.source = source\n    if (!!this.source.name) {\n      this.setName()\n    }\n    if (!!this.source.title) {\n      this.setTitle()\n    }\n    if (!!this.source.subtitle) {\n      this.setSubtitle()\n    }\n  }\n\n  setName() {\n    this.card = this.card.setName(this.source.name)\n    return this\n  }\n\n  setTitle() {\n    this.cardHeader = this.cardHeader.setTitle(this.source.title)\n    return this\n  }\n\n  setSubtitle() {\n    this.cardHeader = this.cardHeader.setSubtitle(this.source.subtitle)\n  }\n\n  build() {\n    return this.card.setHeader(this.cardHeader).build()\n  }\n}\n","import {fetch, push as pushy} from \"App/Data/PushPull\"\n\nexport class MainCardModel {\n  set name(name: string) {\n    pushy([\"MainCardState\", \"card.name\"], name)\n  }\n  get name() {\n    return fetch(\"MainCardState\", \"card.name\")\n  }\n\n  set title(title: string) {\n    pushy([\"MainCardState\", \"header.title\"], title)\n  }\n  get title() {\n    return fetch(\"MainCardState\", \"header.title\")\n  }\n\n  set subtitle(subtitle: string) {\n    pushy([\"MainCardState\", \"header.subtitle\"], subtitle)\n  }\n   get subtitle() {\n    return fetch(\"MainCardState\", \"header.subtitle\")\n  }\n}\n","import objectPath from \"object-path\"\n\ndeclare const Application: ISparseWx\n\n// @ts-ignore\nimport dset from \"dset\"\n\nexport function push(referencePropComplex: string[], value: any) {\n  const reference = referencePropComplex[0]\n  const property = referencePropComplex[1]\n\n  // @ts-ignore\n  let obj = JSON.parse(Application.userProperties.getProperty(reference))\n  if (obj == null) {\n    obj = {}\n  }\n  if (!!property) {\n    dset(obj, property, value)\n  } else {\n    obj = value\n  }\n  Application.userProperties.setProperty(reference, JSON.stringify(obj))\n}\n\nexport function fetch(reference: string, property?: any) {\n  // @ts-ignore\n  let obj = JSON.parse(Application.userProperties.getProperty(reference))\n  if (obj == null) {\n    obj = {}\n    Application.userProperties.setProperty(reference, \"{}\")\n    return null\n  }\n  if (property == null) {\n    return obj\n  }\n  return objectPath.withInheritedProps.get(obj, property)\n}\n",null,null]}